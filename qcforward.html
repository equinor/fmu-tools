

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The qcforward functions &mdash; fmu-tools 1.18.1.dev2+g39c3f3f documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=00fb3d2d"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The qcproperties class" href="qcproperties.html" />
    <link rel="prev" title="FMU design matrix" href="fmudesign.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            fmu-tools
              <img src="_static/equinor-logo2.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">fmu-tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="fmudesign.html">FMU design matrix</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The qcforward functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compare-well-zonation-and-grid">Compare well zonation and grid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-fields-same-input-inside-or-outside-rms">Common fields (same input inside or outside RMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keys-if-ran-inside-rms">Keys if ran inside RMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#if-ran-in-normal-python-terminal-or-ert-job">If ran in normal python (terminal or ERT job)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#known-issues">Known issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-ran-inside-rms">Example when ran inside RMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-ran-from-python-script-in-terminal">Example when ran from python script in terminal:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-in-rms-with-setting-from-a-yaml-file">Example in RMS with setting from a YAML file:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-ran-inside-rms-with-different-settings-for-wells">Example when ran inside RMS with different settings for wells</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#grid-quality-indicators">Grid quality indicators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#grid-quality-indicators-keys">Grid quality indicators keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Common fields (same input inside or outside RMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-actions-field-explained">The actions field explained</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Keys if ran inside RMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">If ran in normal python (terminal or ERT job)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Known issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Example when ran inside RMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Example when ran from python script in terminal:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Example in RMS with setting from a YAML file:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#compare-blocked-wells-with-corresponding-grid-properties">Compare blocked wells with corresponding grid properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Common fields (same input inside or outside RMS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keys-if-run-inside-rms">Keys if run inside RMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#if-run-in-normal-python-terminal-or-ert-job">If run in normal python (terminal or ERT job)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-run-inside-rms">Example when run inside RMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-run-from-python-script-in-terminal">Example when run from python script in terminal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-grid-statistics">Running grid_statistics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#signature">Signature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#required-keys">Required keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-fields">Optional fields</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-executed-inside-rms-continous-properties-basic">Example when executed inside RMS (continous properties - basic):</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-executed-inside-rms-discrete-properties-basic">Example when executed inside RMS (discrete properties - basic):</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-executed-inside-rms-continous-properties-more-settings">Example when executed inside RMS (continous properties - more settings):</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-when-executed-from-python-script-in-terminal">Example when executed from python script in terminal:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Example in RMS with setting from a YAML file:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="qcproperties.html">The qcproperties class</a></li>
<li class="toctree-l1"><a class="reference internal" href="qcreset.html">The qcreset module</a></li>
<li class="toctree-l1"><a class="reference internal" href="generate_petro_jobs_for_field_update.html">rms.generate_petro_jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="properties.html">The properties package</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain_conversion.html">Domain conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_rft_ertobs.html">create_rft_ertobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="rename_rms_scripts.html">rms.rename_rms_scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="rms_import_localmodule.html">rms.import_localmodule</a></li>
<li class="toctree-l1"><a class="reference internal" href="generate_bw_per_facies.html">rms.create_bw_per_facies</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">The fmu-tools utilities package</a></li>
<li class="toctree-l1"><a class="reference internal" href="rmsvolumetrics2csv.html">rmsvolumetrics2csv</a></li>
<li class="toctree-l1"><a class="reference internal" href="ensembles.html">Ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API for fmu.tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fmu-tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">The qcforward functions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/qcforward.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-qcforward-functions">
<h1>The qcforward functions<a class="headerlink" href="#the-qcforward-functions" title="Permalink to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">qcforward</span></code> class provides functionality (methods) to check the result
of various issues during an ensemble run.</p>
<p>All methods share a <em>design philosopy</em></p>
<ul class="simple">
<li><p>The client (user) scripts shall be small and simple and easy to use also
for modellers with little Python experience.</p></li>
<li><p>Input will be a python dictionary, or a YAML file</p></li>
<li><p>If possible (and within scope of method), the <code class="docutils literal notranslate"><span class="pre">qcforward</span></code> methods
should be possible to run both inside RMS and outside RMS.</p></li>
<li><p>Exception of the previous bullet point may occur e.g. if an Eclipse
initialisation is required first; then running the qcforward job outside RMS
is logical.</p></li>
<li><p>All methods shall have a similar appearance (… as similar as possible)</p></li>
</ul>
<p>Methods:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#qcforward-welzonvsgrid"><span class="std std-ref">Compare well zonation and grid</span></a></p></li>
<li><p><a class="reference internal" href="#qcforward-gridqualindicators"><span class="std std-ref">Grid quality indicators</span></a></p></li>
<li><p><a class="reference internal" href="#qcforward-bwvsprops"><span class="std std-ref">Blocked wells vs grid properties</span></a></p></li>
<li><p><a class="reference internal" href="#qcforward-gridstatistics"><span class="std std-ref">Run grid statistics</span></a></p></li>
</ul>
<section id="compare-well-zonation-and-grid">
<span id="qcforward-welzonvsgrid"></span><h2>Compare well zonation and grid<a class="headerlink" href="#compare-well-zonation-and-grid" title="Permalink to this heading"></a></h2>
<p>This method check how the zonelog and/or a perforation log matches with zonation in
the 3D grid. If worse than a given set of limits, either are warning is given or a
full stop of the workflow is forced.</p>
<p>&lt;<a class="reference external" href="https://xtgeo.readthedocs.io/en/latest/_images/zone-well-mismatch-plain.svg">https://xtgeo.readthedocs.io/en/latest/_images/zone-well-mismatch-plain.svg</a>&gt;</p>
<p>The input to this method is a python dictionary with some defined keys. Note that
the order of keys does not matter.</p>
<section id="common-fields-same-input-inside-or-outside-rms">
<h3>Common fields (same input inside or outside RMS)<a class="headerlink" href="#common-fields-same-input-inside-or-outside-rms" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>verbosity</dt><dd><p>Level of output while running None, “info” or “debug”, default is None. (optional)</p>
</dd>
<dt>zonelog:</dt><dd><p>A dictionary with keys <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">range</span></code> and <code class="docutils literal notranslate"><span class="pre">shift</span></code>, see examples (required)</p>
</dd>
<dt>perflog:</dt><dd><p>The name of the perforation log. A dictionary with keys <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">range</span></code>,
see examples (optional). If present, zonelog matching will be performed only
in perforation intervals.</p>
</dd>
<dt>well_resample:</dt><dd><p>To speed up calulations (but on cost of less precision), the wells are resampled
every N.n units along the well path. E.g. the value of 3.0 means every 3 meter if a
metric unit system.</p>
</dd>
<dt>depthrange</dt><dd><p>A list with two entries, defining minimum and maximum depth to use (both ends
are inclusive). Default is [0, 9999]. Setting this range to reservoir gross
interval (e.g. [2200, 3400] will speed up calculations, so it is recommended.</p>
</dd>
<dt>actions</dt><dd><p>This is a list of dictionaries that shows what actions which shall be
performed per well (any) or for the average (all), for example <code class="docutils literal notranslate"><span class="pre">{&quot;warn&quot;:</span> <span class="pre">&quot;all</span> <span class="pre">&lt;</span> <span class="pre">50&quot;,</span> <span class="pre">&quot;stop&quot;:</span> <span class="pre">&quot;all</span> <span class="pre">&lt;</span> <span class="pre">30&quot;}</span></code>
which means that match &lt; than 50% will trigger a warning, while a
match &lt; 30% will trigger a stop in work flow. Note that <code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code>
shall not be mixed in the same record (required).</p>
</dd>
<dt>report</dt><dd><p>Result will be written in a CSV file (which e.g. can be used in plotting) on disk.
(optional)</p>
</dd>
<dt>dump_yaml</dt><dd><p>If present, should be a file name where the current data structure is dumped to YAML
format. Later this YAML file can be edited and applied for a single line input</p>
</dd>
<dt>nametag</dt><dd><p>A string to identify the data set. Recommended.</p>
</dd>
</dl>
</section>
<section id="keys-if-ran-inside-rms">
<h3>Keys if ran inside RMS<a class="headerlink" href="#keys-if-ran-inside-rms" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>wells</dt><dd><p>In RMS this is a dictionary with 3 fields: <code class="docutils literal notranslate"><span class="pre">names</span></code>, <code class="docutils literal notranslate"><span class="pre">logrun</span></code> and <code class="docutils literal notranslate"><span class="pre">trajectory</span></code>.
The names is a list of wellnames which in turn can have python valid regular
expressions. See examples. (required)</p>
</dd>
<dt>grid</dt><dd><p>Name of grid icon in RMS (required)</p>
</dd>
<dt>gridprops</dt><dd><p>A list of grid properties, in this case the name of zone icon in RMS (required)</p>
</dd>
</dl>
</section>
<section id="if-ran-in-normal-python-terminal-or-ert-job">
<h3>If ran in normal python (terminal or ERT job)<a class="headerlink" href="#if-ran-in-normal-python-terminal-or-ert-job" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>wells</dt><dd><p>Outside RMS, wells is a list of files on RMS ascii well format. File wildcards are
allowed, se example. (required)</p>
</dd>
<dt>grid</dt><dd><p>Name of file with grid (on ROFF or EGRID or GRDECL format) (required)</p>
</dd>
<dt>gridprops</dt><dd><p>A list of list where the inner list is a pair with name of Zone and assosiated
filename, for example <code class="docutils literal notranslate"><span class="pre">[[&quot;Zone&quot;,</span> <span class="pre">&quot;zone.roff&quot;]]</span></code></p>
</dd>
</dl>
<section id="known-issues">
<span id="welzon-vs-grid-known-issues"></span><h4>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>The code evaluates of a well sample is inside a grid cell. However, such evaluation
is non-unique as corner point cells are not necessarly well defined in 3D. Hence
one may encounter different results if another tool is applied.</p></li>
</ul>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h4>
</section>
</section>
<section id="example-when-ran-inside-rms">
<h3>Example when ran inside RMS<a class="headerlink" href="#example-when-ran-inside-rms" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span>

<span class="c1"># will match all wells starting with 33_10 and all 34_11 wells containing &quot;A&quot;</span>
<span class="c1"># Note that these are python regular expressions!</span>
<span class="n">WELLS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;33_10.*&quot;</span><span class="p">,</span> <span class="s2">&quot;34_11-.*A.*&quot;</span><span class="p">]</span>

<span class="n">ZONELOGNAME</span> <span class="o">=</span> <span class="s2">&quot;Zonelog&quot;</span>
<span class="n">TRAJ</span> <span class="o">=</span> <span class="s2">&quot;Drilled trajectory&quot;</span>
<span class="n">LOGRUN</span> <span class="o">=</span> <span class="s2">&quot;log&quot;</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;SIMGRID&quot;</span>
<span class="n">ZONEGRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;Zone&quot;</span>
<span class="n">DRANGE</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2100</span><span class="p">,</span> <span class="mi">3200</span><span class="p">]</span>
<span class="n">ZLOGRANGE</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">ZLOGSHIFT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">REPORTPATH</span> <span class="o">=</span> <span class="s2">&quot;/tmp/well_vs_grid.csv&quot;</span>

<span class="n">ACT</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 90&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 70&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 95&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 80&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">qcforward</span><span class="o">.</span><span class="n">WellZonationVsGrid</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="n">WELLS</span><span class="p">,</span> <span class="s2">&quot;logrun&quot;</span><span class="p">:</span> <span class="n">LOGRUN</span><span class="p">,</span> <span class="s2">&quot;trajectory&quot;</span><span class="p">:</span> <span class="n">TRAJ</span><span class="p">},</span>
        <span class="s2">&quot;zonelog&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">ZONELOGNAME</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="n">ZLOGRANGE</span><span class="p">,</span> <span class="s2">&quot;shift&quot;</span><span class="p">:</span> <span class="n">ZLOGSHIFT</span><span class="p">},</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;depthrange&quot;</span><span class="p">:</span> <span class="n">DRANGE</span><span class="p">,</span>
        <span class="s2">&quot;gridprops&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">ZONEGRIDNAME</span><span class="p">],</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACT</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">REPORTPATH</span><span class="p">,</span>
        <span class="s2">&quot;nametag&quot;</span><span class="p">:</span> <span class="s2">&quot;ZONELOG&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">QCJOB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-when-ran-from-python-script-in-terminal">
<h3>Example when ran from python script in terminal:<a class="headerlink" href="#example-when-ran-from-python-script-in-terminal" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span>

<span class="n">WPATH</span> <span class="o">=</span> <span class="s2">&quot;../output/wells/&quot;</span>

<span class="c1"># Here typical linux &quot;file globbing&quot; is used</span>
<span class="n">WELLS</span> <span class="o">=</span> <span class="p">[</span><span class="n">WPATH</span> <span class="o">+</span> <span class="s2">&quot;33_10*.rmswell&quot;</span><span class="p">,</span> <span class="n">WPATH</span> <span class="o">+</span> <span class="s2">&quot;34_11-*A*&quot;</span><span class="p">]</span>
<span class="n">ZONELOGNAME</span> <span class="o">=</span> <span class="s2">&quot;Zonelog&quot;</span>
<span class="n">PERFLOGNAME</span> <span class="o">=</span> <span class="s2">&quot;PERF&quot;</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;../output/checks/simgrid.roff&quot;</span>
<span class="n">ZONEGRIDNAME</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Zone&quot;</span><span class="p">,</span> <span class="s2">&quot;../output/checks/simgrid_zone.roff&quot;</span><span class="p">]</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">qcforward</span><span class="o">.</span><span class="n">WellZonationVsGrid</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="n">WELLS</span><span class="s2">&quot;</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;gridprops&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">ZONEGRIDNAME</span><span class="p">],</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACT</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="s2">&quot;../output/qc/well_vs_grid.csv&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">QCJOB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">usedata</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-in-rms-with-setting-from-a-yaml-file">
<h3>Example in RMS with setting from a YAML file:<a class="headerlink" href="#example-in-rms-with-setting-from-a-yaml-file" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="n">USEDATA</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;../input/qc/somefile.yml&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="n">ACT</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 90&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 70&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 95&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 80&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>
    <span class="n">qcf</span><span class="o">.</span><span class="n">wellzonation_vs_grid</span><span class="p">(</span><span class="n">USEDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
<p>The YAML file may in case look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">actions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;warn&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;all</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">70&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;stop&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;all</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">60&quot;</span><span class="p p-Indicator">}</span>
<span class="nt">depthrange</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1300</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1900</span><span class="p p-Indicator">]</span>
<span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mothergrid</span>
<span class="nt">gridprops</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Zone</span><span class="p p-Indicator">]</span>
<span class="nt">nametag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TST2</span>
<span class="nt">perflog</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">report</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="nv">chk.csv</span><span class="p p-Indicator">,</span><span class="nt"> mode</span><span class="p">:</span><span class="w"> </span><span class="nv">write</span><span class="p p-Indicator">}</span>
<span class="nt">verbosity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>
<span class="nt">well_resample</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">wells</span><span class="p">:</span>
<span class="w">  </span><span class="nt">logrun</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">log</span>
<span class="w">  </span><span class="nt">names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">31_2-D-1_B.*$</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">trajectory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Drilled trajectory</span>
<span class="nt">zonelog</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ZONELOG</span>
<span class="w">  </span><span class="nt">range</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">18</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">shift</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
</pre></div>
</div>
</section>
<section id="example-when-ran-inside-rms-with-different-settings-for-wells">
<h3>Example when ran inside RMS with different settings for wells<a class="headerlink" href="#example-when-ran-inside-rms-with-different-settings-for-wells" title="Permalink to this heading"></a></h3>
<p>It may be the case where some wells are less important to match strict
than other wells.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fmu.tools.qcforward</span> <span class="k">as</span> <span class="nn">qcf</span>

<span class="c1"># will match all wells starting with 33_10 and all 34_11 wells containing &quot;A&quot;</span>
<span class="c1"># Note that these are python regular expressions!</span>
<span class="n">WELLS1</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;33_10.*&quot;</span><span class="p">,</span> <span class="s2">&quot;34_11-.*A.*&quot;</span><span class="p">]</span>
<span class="n">WELLS2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;34_11-.*B.*&quot;</span><span class="p">]</span>


<span class="n">ZONELOGNAME</span> <span class="o">=</span> <span class="s2">&quot;Zonelog&quot;</span>
<span class="n">TRAJ</span> <span class="o">=</span> <span class="s2">&quot;Drilled trajectory&quot;</span>
<span class="n">LOGRUN</span> <span class="o">=</span> <span class="s2">&quot;log&quot;</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;SIMGRID&quot;</span>
<span class="n">ZONEGRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;Zone&quot;</span>

<span class="n">ACT1</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 90&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 70&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 95&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 80&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">ACT2</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 80&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 70&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 75&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 60&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">ACT_EACH1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;warn&lt;&quot;</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span> <span class="s2">&quot;stop&lt;&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">}</span>
<span class="n">ACT_ALL1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;warn&lt;&quot;</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span> <span class="s2">&quot;stop&lt;&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">}</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">qcf</span><span class="o">.</span><span class="n">WellZonationVsGrid</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata1</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="n">WELLS1</span><span class="p">,</span> <span class="s2">&quot;logrun&quot;</span><span class="p">:</span> <span class="n">LOGRUN</span><span class="p">,</span> <span class="s2">&quot;trajectory&quot;</span><span class="p">:</span> <span class="n">TRAJ</span><span class="p">},</span>
        <span class="s2">&quot;zonelog&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">ZONELOGNAME</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s2">&quot;shift&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">},</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;gridzones&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">ZONEGRIDNAME</span><span class="p">],</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACT1</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;../output/qc/well_vs_grid.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;write&quot;</span><span class="p">},</span>
        <span class="s2">&quot;nametag&quot;</span><span class="p">:</span> <span class="s2">&quot;SET1&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># make a copy and modify selected items</span>
    <span class="n">usedata2</span> <span class="o">=</span> <span class="n">usedata1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">usedata2</span><span class="p">[</span><span class="s2">&quot;wells&quot;</span><span class="p">][</span><span class="s2">&quot;names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">WELLS2</span>
    <span class="n">usedata2</span><span class="p">[</span><span class="s2">&quot;actions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ACT2</span><span class="p">,</span>
    <span class="n">usedata2</span><span class="p">[</span><span class="s2">&quot;report&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;../output/qc/well_vs_grid.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;append&quot;</span><span class="p">}</span>
    <span class="n">usedata2</span><span class="p">[</span><span class="s2">&quot;nametag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SET2&quot;</span>

    <span class="c1"># note the &quot;reuse&quot; use to avoid duplicate loading of data like the grid</span>
    <span class="n">qcf</span><span class="o">.</span><span class="n">wellzonation_vs_grid</span><span class="p">(</span><span class="n">usedata1</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcf</span><span class="o">.</span><span class="n">wellzonation_vs_grid</span><span class="p">(</span><span class="n">usedata2</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span> <span class="n">reuse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="grid-quality-indicators">
<span id="qcforward-gridqualindicators"></span><h2>Grid quality indicators<a class="headerlink" href="#grid-quality-indicators" title="Permalink to this heading"></a></h2>
<p>This methods checks the grid quality in various ways, similar to the methods
RMS use (with some exceptions). If worse than a given set of limits, either are
warning is given or a full stop of the workflow is forced.</p>
<p>The input to this method is a python dictionary with some defined keys. Note that
the order of keys does not matter.</p>
<section id="grid-quality-indicators-keys">
<h3>Grid quality indicators keys<a class="headerlink" href="#grid-quality-indicators-keys" title="Permalink to this heading"></a></h3>
<p>The following qridquality measures are currently supported:</p>
<dl class="simple">
<dt>minangle_topbase</dt><dd><p>Minimum angle per cell for top and base, in degrees.</p>
</dd>
<dt>maxangle_topbase</dt><dd><p>Maximum angle per cell for top and base, in degrees.</p>
</dd>
<dt>minangle_topbase_proj</dt><dd><p>Minimum angle per cell for top and base, in degrees, projected in XY view.</p>
</dd>
<dt>maxangle_topbase</dt><dd><p>Maximum angle per cell for top and base, in degrees, projected in XY view.</p>
</dd>
<dt>minangle_sides</dt><dd><p>Minimum angle for all side surfaces.</p>
</dd>
<dt>maxangle_sides</dt><dd><p>Maximum angle for all side surfaces.</p>
</dd>
<dt>collapsed</dt><dd><p>One or more corners are collapsed in Z.</p>
</dd>
<dt>faulted</dt><dd><p>Grid cell is faulted (which is very OK in most cases).</p>
</dd>
<dt>negative_thickness</dt><dd><p>Assign value 1 if cell has negative thickness in one or more corners, 0 else.</p>
</dd>
<dt>concave_proj</dt><dd><p>Assign value 1 if a cell is concave in projected XY (bird) view, 0 else.</p>
</dd>
</dl>
</section>
<section id="id1">
<h3>Common fields (same input inside or outside RMS)<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>verbosity</dt><dd><p>Level of output while running None, “info” or “debug”, default is None. (optional)</p>
</dd>
<dt>actions</dt><dd><p>This is a dictionary that shows what actions which shall be performed at well average
level. An explanation is given below.</p>
</dd>
<dt>report</dt><dd><p>Result will be written in a CSV file (which e.g. can be used in plotting) on disk.
(optional)</p>
</dd>
<dt>dump_yaml</dt><dd><p>If present, should be a file name where the current data structure is dumped to YAML
format. Later this YAML file can be edited and applied for a single line input</p>
</dd>
<dt>nametag</dt><dd><p>A string to identify the data set. Recommended.</p>
</dd>
</dl>
</section>
<section id="the-actions-field-explained">
<h3>The actions field explained<a class="headerlink" href="#the-actions-field-explained" title="Permalink to this heading"></a></h3>
<p>The action field in the examples below can be explained likes this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;minangle_topbase&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 1% when &lt; 80&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 1% when &lt; 50&quot;</span><span class="p">}]</span>
</pre></div>
</div>
<p>The first warning is triggered if the perecentage of cells which minimum angle is
less than than 80 degrees, is greater than 1%. Note that:</p>
<ul class="simple">
<li><p>The first word must contain <code class="docutils literal notranslate"><span class="pre">all</span></code> or <code class="docutils literal notranslate"><span class="pre">any</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">allcells</span></code> will also work</p></li>
<li><p>There must be spaces between words as shown in example above</p></li>
<li><p>The use of <code class="docutils literal notranslate"><span class="pre">%</span></code> is not required, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;all</span> <span class="pre">&gt;</span> <span class="pre">1</span> <span class="pre">when</span> <span class="pre">&lt;</span> <span class="pre">80&quot;</span></code> will also work</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">when</span></code> word can be replaces with e.g. <code class="docutils literal notranslate"><span class="pre">if</span></code> or <code class="docutils literal notranslate"><span class="pre">given</span></code>; the important issue
is that a single word is present</p></li>
</ul>
</section>
<section id="id2">
<h3>Keys if ran inside RMS<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>grid</dt><dd><p>Name of grid icon in RMS (required)</p>
</dd>
<dt>writeicon:</dt><dd><p>If inside RMS will write an icon under the given grid if True.</p>
</dd>
</dl>
</section>
<section id="id3">
<h3>If ran in normal python (terminal or ERT job)<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>grid</dt><dd><p>Name of file with grid (on ROFF or EGRID or GRDECL format) (required)</p>
</dd>
</dl>
<section id="id4">
<h4>Known issues<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Not all RMS grid quality indicators are currently present.</p></li>
</ul>
</section>
<section id="id5">
<h4>Examples<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h4>
</section>
</section>
<section id="id6">
<h3>Example when ran inside RMS<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;SIMGRID&quot;</span>

<span class="n">ACTIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;minangle_topbase&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;allcells &gt; 1% when &lt; 80&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;allcells &gt; 1% when &lt; 50&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;allcells &gt; 50% when &lt; 85&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 10% when &lt; 50&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;allcells &gt; 50% when &lt; 85&quot;</span><span class="p">},</span>
    <span class="p">],</span>
    <span class="s2">&quot;collapsed&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 20%&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 50%&quot;</span><span class="p">}],</span>
    <span class="s2">&quot;faulted&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 20%&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &gt; 50%&quot;</span><span class="p">}],</span>
<span class="p">}</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">qcforward</span><span class="o">.</span><span class="n">GridQuality</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACTIONS</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;../output/qc/gridquality.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;write&quot;</span><span class="p">},</span>
        <span class="s2">&quot;nametag&quot;</span><span class="p">:</span> <span class="s2">&quot;ZONELOG&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">QCJOB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3>Example when ran from python script in terminal:<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span>


<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;../output/checks/simgrid.roff&quot;</span>
<span class="n">ZONEGRIDNAME</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Zone&quot;</span><span class="p">,</span> <span class="s2">&quot;../output/checks/simgrid_zone.roff&quot;</span><span class="p">]</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">qcforward</span><span class="o">.</span><span class="n">GridQuality</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACTIONS</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;../output/qc/gridquality.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;write&quot;</span><span class="p">}</span>
    <span class="p">}</span>

    <span class="n">QCJOB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">usedata</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="id8">
<h3>Example in RMS with setting from a YAML file:<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="n">USEDATA</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;../input/qc/gridquality.yml&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>
    <span class="n">qcf</span><span class="o">.</span><span class="n">wellzonation_vs_grid</span><span class="p">(</span><span class="n">USEDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="compare-blocked-wells-with-corresponding-grid-properties">
<span id="qcforward-bwvsprops"></span><h2>Compare blocked wells with corresponding grid properties<a class="headerlink" href="#compare-blocked-wells-with-corresponding-grid-properties" title="Permalink to this heading"></a></h2>
<p>This method checks how the blocked well cell properties match with corresponding grid
properties in the 3D grid. If worse than a given set of limits, either a warning is
given or a full stop of the workflow is forced.</p>
<p>The input to this method is a python dictionary with some defined keys. Note that
the order of keys does not matter. It is advised to study the examples further below.</p>
<section id="id9">
<h3>Common fields (same input inside or outside RMS)<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<dl>
<dt>verbosity</dt><dd><p>Level of output while running None, “info” or “debug”, default is None (optional).</p>
</dd>
<dt>compare:</dt><dd><p>A dictionary on the form <code class="docutils literal notranslate"><span class="pre">{&quot;Facies&quot;:</span> <span class="pre">&quot;FACIES&quot;,</span> <span class="pre">&quot;PHIT&quot;:</span> <span class="pre">&quot;POROSITY&quot;}</span></code> where the first
elements are the property name in blocked wells (here <code class="docutils literal notranslate"><span class="pre">&quot;Facies,</span> <span class="pre">&quot;PHIT&quot;</span></code>) and the
second elements (after the colon) are the corresponding name in the grid properties
(here <code class="docutils literal notranslate"><span class="pre">&quot;FACIES&quot;,</span> <span class="pre">&quot;POROSITY&quot;</span></code>). Note that names can of course be equal.</p>
</dd>
<dt>actions</dt><dd><p>This is a list of dictionaries that shows what actions which shall be performed per
well (any) or for the average (all), for example <code class="docutils literal notranslate"><span class="pre">{&quot;warn&quot;:</span> <span class="pre">&quot;all</span> <span class="pre">&lt;</span> <span class="pre">50&quot;,</span> <span class="pre">&quot;stop&quot;:</span> <span class="pre">&quot;all</span> <span class="pre">&lt;</span>
<span class="pre">30&quot;}</span></code> which means that match &lt; than 50% will trigger a warning, while a match &lt; 30%
will trigger a stop in work flow. Note that <code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> shall not be mixed in
the same record (required). Also both lines are (currently) required.
Finaly note that these are all equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 50&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt;30&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;allwells &lt; 50&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;allwells &lt;30&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;allfoo &lt; 50&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;allfoo &lt;30&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Hence it is the substrings <code class="docutils literal notranslate"><span class="pre">all</span></code> or <code class="docutils literal notranslate"><span class="pre">any</span></code> that matters.</p>
</dd>
<dt>report</dt><dd><p>Result will be written in a CSV file (which e.g. can be used in plotting) on disk.
(optional).</p>
</dd>
<dt>dump_yaml</dt><dd><p>If present, should be a file name where the current data structure is dumped to YAML
format. Later this YAML file can be edited and applied for a single line input
(optional).</p>
</dd>
<dt>nametag</dt><dd><p>A string to identify the data set. Recommended.</p>
</dd>
<dt>tolerance</dt><dd><p>Provide the tolerance for the match between a blocked well cell and the corresponding
grid property cell. This tolerance can be given either as an absolute tolerance or a
relative tolerance. An asolute tolerance can be given on the form <code class="docutils literal notranslate"><span class="pre">0.01</span></code> or as a
dictionary: <code class="docutils literal notranslate"><span class="pre">{&quot;abs&quot;:</span> <span class="pre">0.01}</span></code> while a relative tolerance shall be given as <code class="docutils literal notranslate"><span class="pre">{&quot;rel&quot;:</span>
<span class="pre">0.01}</span></code>. An absolute tolerance just looks at the absolute value of the difference,
while a relative tolerance will do a weighting on the mean value from the blocked
logs, and is thus more sensible to use for input logs with varying average values
(e.g. porosity and permeability).</p>
</dd>
<dt>show_data</dt><dd><p>A string or a dict (or None) if the processed dataset shall be shown to screen as a
dataframe (table). This can be useful when investigating what wells that trigger e.g.
a stop. Possible values are None (default, means no output), “yes” just to show all.
However for a more fine-grained control, using a dict is recommended:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># show FAIL lines for wells that have status STOP:</span>
<span class="s2">&quot;show_data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;lines&quot;</span><span class="p">:</span> <span class="s2">&quot;FAIL&quot;</span><span class="p">,</span> <span class="s2">&quot;wellstatus&quot;</span><span class="p">:</span> <span class="s2">&quot;stop&quot;</span><span class="p">}</span>

<span class="c1"># show FAIL lines for wells that have status WARN:</span>
<span class="s2">&quot;show_data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;lines&quot;</span><span class="p">:</span> <span class="s2">&quot;FAIL&quot;</span><span class="p">,</span> <span class="s2">&quot;wellstatus&quot;</span><span class="p">:</span> <span class="s2">&quot;warn&quot;</span><span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>tvd_range</dt><dd><p>A list of two numbers can be applied to limit the vertical range of the comparison.
The numbers shall represent minimum and maximum depth, and the range is inclusive,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;tvd_range&quot;</span> <span class="p">[</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">2300</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that this setting can exclude whole wells from being evaluated.</p>
</dd>
</dl>
</section>
<section id="keys-if-run-inside-rms">
<h3>Keys if run inside RMS<a class="headerlink" href="#keys-if-run-inside-rms" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>bwells</dt><dd><p>In RMS this is a dictionary with 3 fields: <code class="docutils literal notranslate"><span class="pre">names</span></code>, <code class="docutils literal notranslate"><span class="pre">grid</span></code> and <code class="docutils literal notranslate"><span class="pre">bwname</span></code>.
The names is a list of wellnames which in turn can have python valid regular
expressions. See examples. (required).</p>
</dd>
<dt>grid</dt><dd><p>Name of grid icon in RMS (required).</p>
</dd>
</dl>
</section>
<section id="if-run-in-normal-python-terminal-or-ert-job">
<h3>If run in normal python (terminal or ERT job)<a class="headerlink" href="#if-run-in-normal-python-terminal-or-ert-job" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>bwells</dt><dd><p>Outside RMS, wells is a list of files on RMS ascii well format. File wildcards are
allowed, se example. (required).</p>
</dd>
<dt>grid</dt><dd><p>Name of file with grid (in ROFF, EGRID or GRDECL format) (required).</p>
</dd>
<dt>gridprops</dt><dd><p>A list of list where the inner list is a pair with name of Zone and assosiated
filename, for example <code class="docutils literal notranslate"><span class="pre">[[&quot;Zone&quot;,</span> <span class="pre">&quot;zone.roff&quot;]]</span></code>. This is required when running
outside RMS but not needed when run inside RMS.</p>
</dd>
</dl>
</section>
<section id="example-when-run-inside-rms">
<h3>Example when run inside RMS<a class="headerlink" href="#example-when-run-inside-rms" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">fmu.tools</span>

<span class="n">GNAME</span> <span class="o">=</span> <span class="s2">&quot;Geogrid_Valysar&quot;</span>

<span class="c1"># dict showing &quot;mappings&quot;, blocked well version first</span>
<span class="n">COMPARE1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Facies&quot;</span><span class="p">:</span> <span class="s2">&quot;FACIES&quot;</span><span class="p">,</span> <span class="s2">&quot;PHIT&quot;</span><span class="p">:</span> <span class="s2">&quot;PHIT&quot;</span><span class="p">}</span>

<span class="n">BWDATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;55.*&quot;</span><span class="p">],</span>
    <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GNAME</span><span class="p">,</span>
    <span class="s2">&quot;bwname&quot;</span><span class="p">:</span> <span class="s2">&quot;BW&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">REPORTPATH1</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/bw_vs_prop.csv&quot;</span>

<span class="n">ACTIONS1</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 95%&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 80%&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 95%&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 90%&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">fmu</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">qcforward</span><span class="o">.</span><span class="n">BlockedWellsVsGridProperties</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="c1"># make report folder if not present</span>
    <span class="n">reportpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">REPORTPATH1</span><span class="p">)</span>
    <span class="n">reportpath</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">usezonedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;bwells&quot;</span><span class="p">:</span> <span class="n">BWDATA</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GNAME</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACTIONS1</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">REPORTPATH1</span><span class="p">,</span>
        <span class="s2">&quot;compare&quot;</span><span class="p">:</span> <span class="n">COMPARE1</span><span class="p">,</span>
        <span class="s2">&quot;verbosity&quot;</span><span class="p">:</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tolerance&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;rel&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
        <span class="s2">&quot;nametag&quot;</span><span class="p">:</span> <span class="s2">&quot;BWCHECK&quot;</span><span class="p">,</span>
        <span class="s2">&quot;show_data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;lines&quot;</span><span class="p">:</span> <span class="s2">&quot;FAIL&quot;</span><span class="p">,</span> <span class="s2">&quot;wellstatus&quot;</span><span class="p">:</span> <span class="s2">&quot;stop&quot;</span><span class="p">},</span>
        <span class="s2">&quot;tvd_range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2700</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="n">QCJOB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">usezonedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-when-run-from-python-script-in-terminal">
<h3>Example when run from python script in terminal<a class="headerlink" href="#example-when-run-from-python-script-in-terminal" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">fmu.tools</span>

<span class="n">GFILE</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/grid/geogrid_valysar.roff&quot;</span>  <span class="c1"># has both grid and props</span>
<span class="n">BWELLFILES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;../qc/output/wells/bw/valysar*.bw&quot;</span><span class="p">]</span>

<span class="c1"># dict showing &quot;mappings&quot;, blocked well version first</span>
<span class="n">COMPARE1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Facies&quot;</span><span class="p">:</span> <span class="s2">&quot;FACIES&quot;</span><span class="p">,</span> <span class="s2">&quot;PHIT&quot;</span><span class="p">:</span> <span class="s2">&quot;PHIT&quot;</span><span class="p">}</span>

<span class="n">GPROPS</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;FACIES&quot;</span><span class="p">,</span> <span class="n">GFILE</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;PHIT&quot;</span><span class="p">,</span> <span class="n">GFILE</span><span class="p">]]</span>

<span class="n">REPORTPATH1</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/bw_vs_prop.csv&quot;</span>

<span class="n">ACTIONS1</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 95%&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;any &lt; 80%&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;warn&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 95%&quot;</span><span class="p">,</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span> <span class="s2">&quot;all &lt; 90%&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">QCJOB</span> <span class="o">=</span> <span class="n">fmu</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">qcforward</span><span class="o">.</span><span class="n">BlockedWellsVsGridProperties</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="c1"># make report folder if not present</span>
    <span class="n">reportpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">REPORTPATH1</span><span class="p">)</span>
    <span class="n">reportpath</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">usezonedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;bwells&quot;</span><span class="p">:</span> <span class="n">BWELLFILES</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GFILE</span><span class="p">,</span>
        <span class="s2">&quot;gridprops&quot;</span><span class="p">:</span> <span class="n">GPROPS</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACTIONS1</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">REPORTPATH1</span><span class="p">,</span>
        <span class="s2">&quot;compare&quot;</span><span class="p">:</span> <span class="n">COMPARE1</span><span class="p">,</span>
        <span class="s2">&quot;verbosity&quot;</span><span class="p">:</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tolerance&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;rel&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
        <span class="s2">&quot;nametag&quot;</span><span class="p">:</span> <span class="s2">&quot;BWCHECK&quot;</span><span class="p">,</span>
        <span class="s2">&quot;show_data&quot;</span><span class="p">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">QCJOB</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">usezonedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="running-grid-statistics">
<span id="qcforward-gridstatistics"></span><h2>Running grid_statistics<a class="headerlink" href="#running-grid-statistics" title="Permalink to this heading"></a></h2>
<p>This method checks if property statistics from 3D grids are within user specified
thresholds. If worse than a given set of limits, either a warning is given or a
full stop of the workflow is forced.</p>
<p>Both discrete and continous properties are supported.</p>
<section id="signature">
<h3>Signature<a class="headerlink" href="#signature" title="Permalink to this heading"></a></h3>
<p>The input to this method is a python dictionary with some defined keys. Note that
the order of keys does not matter.</p>
</section>
<section id="required-keys">
<h3>Required keys<a class="headerlink" href="#required-keys" title="Permalink to this heading"></a></h3>
<dl>
<dt>grid</dt><dd><p>Name of grid icon if run inside RMS, or name of file with grid (on ROFF or EGRID or GRDECL format)</p>
</dd>
<dt>actions</dt><dd><p>This is a list of dictionaries. Each dictionary specifies a condition to check statistics for,
and what action should be performed if outside a given thresholds (either warn or stop the workflow).</p>
<p>Input keys:</p>
<dl>
<dt>property</dt><dd><p>Name of property (either a property icon in RMS, or a file name)</p>
</dd>
<dt>codename</dt><dd><p>The discrete property code name to check value for (optional).
.. note:: A codename is only needed for discrete properties</p>
</dd>
<dt>calculation</dt><dd><p>Name of statistical value to check (optional). Default option is “Avg”,
while other valid options for continous properties are “Min”, “Max” and “Stddev”.</p>
</dd>
<dt>selectors</dt><dd><p>A dictionary of conditions to extract statistics from. e.g. a specific zone and/or region (optional).</p>
<p>The key is the name of the property (either a property icon in RMS, or a file name), and the
value is the code name.</p>
</dd>
<dt>filters</dt><dd><p>A dictionary of filters (optional). The key is the name (or path) to the filter parameter, and the
value is a dictionary with options “include” or “exclude” where key are the list of values to include/exclude.
Only discrete parameters are supported.</p>
<p>For example <code class="docutils literal notranslate"><span class="pre">{&quot;ZONE&quot;:</span> <span class="pre">{&quot;include:</span> <span class="pre">[&quot;Zone_1&quot;,</span> <span class="pre">&quot;Zone_2&quot;]}}</span></code></p>
</dd>
<dt>stop_outside</dt><dd><p>This is a list with two values which defines the minimum and maximum threshold for when to trigger a stop
of the workflow (required).</p>
<p>For example <code class="docutils literal notranslate"><span class="pre">[0.05,</span> <span class="pre">0.35]</span></code> will give a warning if the statistic is &lt; than 0.05 and &gt; than 0.35.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For discrete properties the statistical value will be reported in fractions.</p>
</div>
</dd>
<dt>warn_outside</dt><dd><p>Same as warn_outside key above, but instead defines when to give a warning (optional).</p>
</dd>
<dt>description</dt><dd><p>A string to describe each action (optional).</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="optional-fields">
<h3>Optional fields<a class="headerlink" href="#optional-fields" title="Permalink to this heading"></a></h3>
<dl class="simple">
<dt>path</dt><dd><p>Path to grid property files and grid if run outside RMS (optional)</p>
</dd>
<dt>verbosity</dt><dd><p>Level of output while running None, “info” or “debug” (optional). Default is None.</p>
</dd>
<dt>report</dt><dd><p>Name of CSV file to write results to (optional)</p>
</dd>
<dt>dump_yaml</dt><dd><p>File name where the current data structure is dumped to YAML format (optional).
Later this YAML file can be edited and applied for a single line input</p>
</dd>
<dt>nametag</dt><dd><p>A string to identify the data set (optional). Recommended.</p>
</dd>
</dl>
<section id="id10">
<h4>Examples<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h4>
</section>
</section>
<section id="example-when-executed-inside-rms-continous-properties-basic">
<h3>Example when executed inside RMS (continous properties - basic):<a class="headerlink" href="#example-when-executed-inside-rms-continous-properties-basic" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>

<span class="c1"># Check average grid statistics for porosity and permeability</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;SimGrid&quot;</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;somefile.csv&quot;</span>
<span class="n">ACTIONS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;PORO&quot;</span><span class="p">,</span>
        <span class="s2">&quot;warn_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.10</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
        <span class="s2">&quot;stop_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;PERM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;stop_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2000</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACTIONS</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">REPORT</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcf</span><span class="o">.</span><span class="n">grid_statistics</span><span class="p">(</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-when-executed-inside-rms-discrete-properties-basic">
<h3>Example when executed inside RMS (discrete properties - basic):<a class="headerlink" href="#example-when-executed-inside-rms-discrete-properties-basic" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>

<span class="c1"># Check average grid statistics for porosity and permeability</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;SimGrid&quot;</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;somefile.csv&quot;</span>
<span class="n">ACTIONS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;Facies&quot;</span><span class="p">,</span>
        <span class="s2">&quot;codename&quot;</span><span class="p">:</span> <span class="s2">&quot;Sand&quot;</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Top_Zone&quot;</span><span class="p">},</span>
        <span class="s2">&quot;stop_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;Facies&quot;</span><span class="p">,</span>
        <span class="s2">&quot;codename&quot;</span><span class="p">:</span> <span class="s2">&quot;Sand&quot;</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Zone&quot;</span><span class="p">:</span> <span class="s2">&quot;Mid_Zone&quot;</span><span class="p">},</span>
        <span class="s2">&quot;stop_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">ACTIONS</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">REPORT</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcf</span><span class="o">.</span><span class="n">grid_statistics</span><span class="p">(</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-when-executed-inside-rms-continous-properties-more-settings">
<h3>Example when executed inside RMS (continous properties - more settings):<a class="headerlink" href="#example-when-executed-inside-rms-continous-properties-more-settings" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>

<span class="c1"># Check average grid statistics for the porosity in HC-zone</span>
<span class="c1"># Separate checks for the different zones</span>

<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;SimGrid&quot;</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;somefile.csv&quot;</span>

<span class="n">ZONE_STOPS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Top_Zone&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
    <span class="s2">&quot;Mid_Zone&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span>
    <span class="s2">&quot;Bottom_Zone&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">zone</span><span class="p">,</span> <span class="n">limits</span> <span class="ow">in</span> <span class="n">ZONE_STOPS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;PORO&quot;</span><span class="p">,</span>
                <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Zone&quot;</span><span class="p">:</span> <span class="n">zone</span><span class="p">},</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;FLUID&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;include&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Gas&quot;</span><span class="p">,</span> <span class="s2">&quot;Oil&quot;</span><span class="p">]}},</span>
                <span class="s2">&quot;stop_outside&quot;</span><span class="p">:</span> <span class="n">limits</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;nametag&quot;</span><span class="p">:</span> <span class="s2">&quot;MYDATA1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">REPORT</span><span class="p">,</span>
        <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">actions</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcf</span><span class="o">.</span><span class="n">grid_statistics</span><span class="p">(</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-when-executed-from-python-script-in-terminal">
<h3>Example when executed from python script in terminal:<a class="headerlink" href="#example-when-executed-from-python-script-in-terminal" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>

<span class="c1"># Check average grid statistics for a porosity</span>

<span class="n">PATH</span> <span class="o">=</span> <span class="s2">&quot;../output/checks/&quot;</span>
<span class="n">GRIDNAME</span> <span class="o">=</span> <span class="s2">&quot;simgrid.roff&quot;</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;somefile.csv&quot;</span>

<span class="n">ACTIONS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;poro.roff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;zone.roff&quot;</span><span class="p">:</span> <span class="s2">&quot;Top_Zone&quot;</span><span class="p">},</span>
        <span class="s2">&quot;warn_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.10</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span>
        <span class="s2">&quot;stop_outside&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">PATH</span><span class="p">,</span>
        <span class="n">grid</span><span class="p">:</span> <span class="n">GRIDNAME</span><span class="p">,</span>
        <span class="n">actions</span><span class="p">:</span> <span class="n">ACTIONS</span><span class="p">,</span>
        <span class="n">report</span><span class="p">:</span> <span class="n">REPORT</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcf</span><span class="o">.</span><span class="n">grid_statistics</span><span class="p">(</span><span class="n">usedata</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3>Example in RMS with setting from a YAML file:<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">qcforward</span> <span class="k">as</span> <span class="n">qcf</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="n">USEDATA</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;../input/qc/somefile.yml&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">():</span>
    <span class="n">qcf</span><span class="o">.</span><span class="n">grid_statistics</span><span class="p">(</span><span class="n">USEDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
<p>The YAML file may in case look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mothergrid</span>
<span class="nt">actions</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORO</span>
<span class="w">  </span><span class="nt">stop_outside</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">warn_outside</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.18</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.25</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORO</span>
<span class="w">  </span><span class="nt">selectors</span><span class="p">:</span>
<span class="w">    </span><span class="nt">Zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Top_Zone</span>
<span class="w">  </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">REGION</span><span class="p">:</span>
<span class="w">      </span><span class="nt">exclude</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;Surroundings&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">stop_outside</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">warn_outside</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.18</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.25</span><span class="p p-Indicator">]</span>
<span class="nt">report</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">somefile.csv</span>
<span class="nt">nametag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QC_PORO</span>
<span class="nt">verbosity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fmudesign.html" class="btn btn-neutral float-left" title="FMU design matrix" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="qcproperties.html" class="btn btn-neutral float-right" title="The qcproperties class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Equinor.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #ff1243;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #474747;
    }
    .wy-side-nav-search > div.version {
      color: white;
    }
  </style>


</body>
</html>