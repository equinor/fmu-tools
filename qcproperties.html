

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The qcproperties class &mdash; fmu-tools 1.16.1.dev12+g1862268 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=e87d431a"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The qcreset module" href="qcreset.html" />
    <link rel="prev" title="The qcforward functions" href="qcforward.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            fmu-tools
              <img src="_static/equinor-logo2.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">fmu-tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="fmudesign.html">FMU design matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="qcforward.html">The qcforward functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The qcproperties class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#methods-for-extracting-property-statistics">Methods for extracting property statistics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#other-methods">Other methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arguments">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get-grid-statistics-examples">get_grid_statistics examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-well-statistics-examples">get_well_statistics examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-bwell-statistics-examples">get_bwell_statistics examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#comparison-of-data-from-different-sources">Comparison of data from different sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#advice-when-comparing-data-from-different-sources">Advice when comparing data from different sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-yaml-input-for-auto-execution">Using yaml input for auto execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-in-rms-with-setting-from-a-yaml-file">Example in RMS with setting from a YAML file:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#additional-notes">Additional Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#advice-on-performance">Advice on performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comparison-with-statistics-in-rms">Comparison with statistics in RMS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="qcreset.html">The qcreset module</a></li>
<li class="toctree-l1"><a class="reference internal" href="properties.html">The properties package</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain_conversion.html">Domain conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_rft_ertobs.html">create_rft_ertobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="rename_rms_scripts.html">rms.rename_rms_scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="rms_import_localmodule.html">rms.import_localmodule</a></li>
<li class="toctree-l1"><a class="reference internal" href="rmsvolumetrics2csv.html">rmsvolumetrics2csv</a></li>
<li class="toctree-l1"><a class="reference internal" href="ensembles.html">Ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API for fmu.tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fmu-tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">The qcproperties class</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/qcproperties.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-qcproperties-class">
<h1>The qcproperties class<a class="headerlink" href="#the-qcproperties-class" title="Permalink to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">qcproperties</span></code> class provides a set of methods for extracting property
statistics from 3D Grids, Raw and Blocked wells.</p>
<p>Statistics can be extracted for both continous and discrete properties. Dependent on the
property type different statistics are calculated. The property type is auto-detected.</p>
<p>If several methods of statistics extraction has been run within the instance,
a merged dataframe is available through the ‘dataframe’ property.</p>
<p>The methods for statistics extraction can be run individually, or a yaml-configuration
file can be used to enable an automatic run of the methods.</p>
<p>All methods can be run from either RMS python, or from files (e.g. from an ERT job).</p>
<p>XTGeo is being utilized to get a dataframe from the input parameter data. XTGeo data
is reused in the instance to increase performance.</p>
<section id="methods-for-extracting-property-statistics">
<h2>Methods for extracting property statistics<a class="headerlink" href="#methods-for-extracting-property-statistics" title="Permalink to this heading"></a></h2>
<p>Three methods exists for extracting property statistics. The method to select
is dependent on the input data source (3D grid properties, wells or blocked wells).
Arguments for the methods are similar and described in section below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_grid_statistics</span></code>: This method extract property statistics from 3D grid data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_well_statistics</span></code>: This method extract property statistics from well logs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_bwell_statistics</span></code>: This method extract property statistics from blocked well logs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_yaml</span></code>: Use a yaml-configuration file to enable an automatic run of the methods above.</p></li>
</ul>
<p>All methods returns a Pandas DataFrame for the run in question, if several methods of statistics
extraction has been run within the instance a merged dataframe is available through the
‘dataframe’ property</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <cite>Using yaml input for auto execution</cite> section for description of how to use
a yaml-configuration file to run the different methods automatically.</p>
</div>
<section id="other-methods">
<h3>Other methods<a class="headerlink" href="#other-methods" title="Permalink to this heading"></a></h3>
<p>Note: The methods below are only applicable if at least one method for extracting statistics
have been run within the QCProperties instance.</p>
<dl class="simple">
<dt>dataframe</dt><dd><p>A merged dataframe with statistical data for <strong>continous</strong> properties from all
runs of statistics extractions within the instance.</p>
</dd>
<dt>to_csv</dt><dd><p>Used to write the dataframe with statistics to a csv-file. Takes one arguments:
<code class="docutils literal notranslate"><span class="pre">csvfile</span></code>: String with desired filename (required).</p>
</dd>
</dl>
</section>
<section id="arguments">
<h3>Arguments<a class="headerlink" href="#arguments" title="Permalink to this heading"></a></h3>
<p>The input <cite>data</cite> is given in a python dictionary (or a YAML file) and will be somewhat
different for the three methods, and for the two run environments (inside/outside RMS).</p>
<p><strong>Input arguments:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: The input data as a Python dictionary (required). See valid keys below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">project</span></code>: Required for usage inside RMS</p></li>
</ul>
<p><strong>Valid fields in the ‘data’ argument:</strong></p>
<dl>
<dt>Method specific fields:</dt><dd><dl>
<dt>grid</dt><dd><p>Name of grid icon in RMS, or name of grid file if run outside RMS. Required with the
<code class="docutils literal notranslate"><span class="pre">get_grid_statistics</span></code> method.</p>
</dd>
<dt>wells</dt><dd><p>Required with the <code class="docutils literal notranslate"><span class="pre">get_well_statistics</span></code> and the <code class="docutils literal notranslate"><span class="pre">get_bwell_statistics</span></code> methods.
Outside RMS, “wells” is a list of files on RMS ascii well format.</p>
<p>Inside RMS, “wells” is a dictionary whith 3 fields that depend on the method:</p>
<p><strong>get_well_statistics</strong>:</p>
<p><code class="docutils literal notranslate"><span class="pre">names</span></code>: List of wellnames (optional). Default is all wells.
<code class="docutils literal notranslate"><span class="pre">logrun</span></code>: Name of logrun.
<code class="docutils literal notranslate"><span class="pre">trajectory</span></code>: Name of trajectory.</p>
<p><strong>get_bwell_statistics</strong>:</p>
<p><code class="docutils literal notranslate"><span class="pre">names</span></code>: List of wellnames (optional). Default is all wells.
<code class="docutils literal notranslate"><span class="pre">bwname</span></code>: Name of BW object in RMS.
<code class="docutils literal notranslate"><span class="pre">grid</span></code>: Name of grid that contains the BW object.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Wildcards are supported when running from files, and python valid regular
expressions are supported in “names”, see examples.</p>
</div>
</dd>
</dl>
</dd>
<dt>Common fields:</dt><dd><dl>
<dt>properties</dt><dd><p>Properties to compute statistics for. Both continous and discrete properties
are supported. Standard statistics will be computed for continous properties
e.g “avg” and “stddev”, while for discrete properties percentages are calculated.</p>
<p>Can be given as list or as dictionary.
If dictionary the key will be the column name in the output dataframe, and
the value will be a dictionary with valid options:</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The actual name (or path) of the property / log.</p>
<p><code class="docutils literal notranslate"><span class="pre">weight</span></code>: A weight parameter (name or path if outside RMS) (optional)</p>
<p><code class="docutils literal notranslate"><span class="pre">pfile</span></code>: Name (or path) to file containing the parameter e.g. INIT file (optional)</p>
</dd>
<dt>selectors</dt><dd><p>Selectors are discrete properties/logs e.g. Zone. that are used to extract
statistics for groups of the data (optional).</p>
<p>Can be given as list or as dictionary.
If dictionary the key will be the column name in the output dataframe, and
the value will be a dictionary with valid options:</p>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The actual name (or path) of the property / log.</p>
<p><code class="docutils literal notranslate"><span class="pre">include</span></code>: List of values to include (optional)</p>
<p><code class="docutils literal notranslate"><span class="pre">exclude</span></code>: List of values to exclude (optional)</p>
<p><code class="docutils literal notranslate"><span class="pre">codes</span></code>: A dictionary of codenames to update some/all existing codenames (optional).</p>
<p><code class="docutils literal notranslate"><span class="pre">pfile</span></code>: Name (or path) to file containing the parameter e.g. INIT file (optional)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The “codes” field can be used to merge code values that the user wants to extract
combined statistics from. This is done by setting the same name on several code
values, as it is the name that are used to group the data.</p>
</div>
</dd>
<dt>filters</dt><dd><p>Dictionary with additional filters (optional).</p>
<p>The key is the name (or path) to the filter parameter / log, and the
value is a dictionary with options:</p>
<p><code class="docutils literal notranslate"><span class="pre">include</span></code>: List of values to include for discrete parameters</p>
<p><code class="docutils literal notranslate"><span class="pre">exclude</span></code>: List of values to exclude for discrete parameters</p>
<p><code class="docutils literal notranslate"><span class="pre">range</span></code>: List with two entries, defining minimum and maximum values to use for continous parameters</p>
<p><code class="docutils literal notranslate"><span class="pre">pfile</span></code>: Name (or path) to file containing the parameter e.g. INIT file</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a selector or property is input as a filter, this will override any existing filters
specified directly on the selector/property.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Option <code class="docutils literal notranslate"><span class="pre">&quot;multiple_filters&quot;</span></code> below which can be used to extract statistics
multiple times with different filters.</p>
</div>
</dd>
<dt>multiple_filters</dt><dd><p>Option that can be used to extract statistics multiple times with different filters (optional).</p>
<p>The input is a dictionariy where the keys are the “name” (ID string) for the dataset,
and the value is the dictionary of filters (Same format as <code class="docutils literal notranslate"><span class="pre">filters</span></code> above)</p>
<p>See examples.</p>
</dd>
<dt>path</dt><dd><p>Path to where files are located (optional)</p>
</dd>
<dt>selector_combos</dt><dd><p>Bool to turn on/off calculation of statistics for every combination of selectors
(optional). Default is True.
For example, if True and both a ZONE and a REGION parameter is given as selectors,
statistics for three groups will be calculated: <code class="docutils literal notranslate"><span class="pre">[&quot;ZONE&quot;,</span> <span class="pre">&quot;FACIES&quot;],</span> <span class="pre">[&quot;ZONE&quot;]</span> <span class="pre">and</span> <span class="pre">[&quot;REGION&quot;]</span></code>.
If False the data will only be extracted for one group: <code class="docutils literal notranslate"><span class="pre">[&quot;ZONE&quot;,</span> <span class="pre">&quot;FACIES&quot;]</span></code>, hence
no data is available if the user wants to evaluate statistics per ZONE (or REGION) for the global
grid.</p>
<p>Depending on number of selectors and size of grid, this process may be
time consuming.</p>
</dd>
<dt>source</dt><dd><p>Source string (optional). Default values depend on the method being executed:</p>
<ul class="simple">
<li><p>For <strong>grid statistics</strong> default is the <cite>gridname</cite></p></li>
<li><p>For <strong>blocked wells statistics</strong> default is the <cite>name of the blocked wells object</cite> if inside
RMS and <cite>bwells</cite> if outside</p></li>
<li><p>For <strong>well statistics</strong> default is <cite>wells</cite></p></li>
</ul>
</dd>
<dt>name</dt><dd><p>ID string for the dataset (optional). Recommended, if not given it will be set equal
to the source string.</p>
</dd>
<dt>verbosity</dt><dd><p>Level of output while running None, “info” or “debug”, default is None. (optional)</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h3>
<section id="get-grid-statistics-examples">
<h4>get_grid_statistics examples<a class="headerlink" href="#get-grid-statistics-examples" title="Permalink to this heading"></a></h4>
<p><strong>Example in RMS (continous properties - basic):</strong></p>
<p>Example extracting statistics for porosity and permeability for each zone and facies.
Result is written to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">GRID</span> <span class="o">=</span> <span class="s2">&quot;GeoGrid&quot;</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Poro&quot;</span><span class="p">,</span> <span class="s2">&quot;Perm&quot;</span><span class="p">]</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Zone&quot;</span><span class="p">,</span> <span class="s2">&quot;Facies&quot;</span><span class="p">]</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRID</span><span class="p">,</span>
        <span class="s2">&quot;verbosity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example in RMS (continous properties - more settings):</strong></p>
<p>Example extracting statistics for porosity per region. Filters
are used to extract statistics for HC zone and Water zone separately.
Statistics will be combined for regions with code values 2 and 3.
Both properties are weighted on a Total_bulk parameter.
Result is written to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">GRID</span> <span class="o">=</span> <span class="s2">&quot;GeoGrid&quot;</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;PORO&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PHIT&quot;</span><span class="p">,</span> <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="s2">&quot;Total_bulk&quot;</span><span class="p">},</span>
<span class="p">}</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;REGION&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Regions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exclude&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Surroundings&quot;</span><span class="p">],</span>
        <span class="s2">&quot;codes&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;NS&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;NS&quot;</span><span class="p">,},</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/continous_stats.csv&quot;</span>

<span class="n">FLUID_FILTERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;HC_zone&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Fluid&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;include&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;oil&quot;</span><span class="p">,</span> <span class="s2">&quot;gas&quot;</span><span class="p">]}},</span>
    <span class="s2">&quot;Water_zone&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Fluid&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;include&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;water&quot;</span><span class="p">]}},</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRID</span><span class="p">,</span>
        <span class="s2">&quot;multiple_filters&quot;</span><span class="p">:</span> <span class="n">FLUID_FILTERS</span><span class="p">,</span>
        <span class="s2">&quot;verbosity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code is executed twice, filtering on the HC-zone first then the water-zone
in a second run. Alternatively the fluid parameter could have been used as a
selector, for extracting statistics in one run.</p>
</div>
<p><strong>Example in RMS (discrete properties):</strong></p>
<p>Example extracting statistics for a discrete facies parameter for each region.
The facies parameter are weighted on a Total_bulk parameter.</p>
<p>The result is written out to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">GRID</span> <span class="o">=</span> <span class="s2">&quot;GeoGrid&quot;</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;FACIES&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Facies&quot;</span><span class="p">,</span> <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="s2">&quot;Total_bulk&quot;</span><span class="p">},</span>
<span class="p">}</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Regions&quot;</span><span class="p">]</span>

<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/discrete_stats.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRID</span><span class="p">,</span>
        <span class="s2">&quot;verbosity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example when executed from files:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">PATH</span> <span class="o">=</span> <span class="s2">&quot;../input/qc/&quot;</span>
<span class="n">GRID</span> <span class="o">=</span> <span class="s2">&quot;grid.roff&quot;</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;PORO&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;poro.roff&quot;</span><span class="p">}}</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ZONE&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;zone.roff&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;FACIES&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;facies.roff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exclude&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Carbonate&quot;</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">PATH</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRID</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MYDATA&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Example when executed from file using Eclipse INIT-file as input:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">PATH</span> <span class="o">=</span> <span class="s2">&quot;../input/qc/&quot;</span>
<span class="n">GRID</span> <span class="o">=</span> <span class="s2">&quot;ECLIPSE.EGRID&quot;</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;PERMX&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PERMX&quot;</span><span class="p">,</span> <span class="s2">&quot;pfile&quot;</span><span class="p">:</span> <span class="s2">&quot;ECLIPSE.INIT&quot;</span><span class="p">}}</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;FIPNUM&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;FIPNUM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pfile&quot;</span><span class="p">:</span> <span class="s2">&quot;ECLIPSE.INIT&quot;</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">PATH</span><span class="p">,</span>
        <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">GRID</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;from_eclipse&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="get-well-statistics-examples">
<h4>get_well_statistics examples<a class="headerlink" href="#get-well-statistics-examples" title="Permalink to this heading"></a></h4>
<p><strong>Example in RMS:</strong></p>
<p>Example extracting statistics for permeability for each zone and facies.
All wells starting with 33_10 and all 34_11 wells containing “A” will be included in statistics.
Note the use of python regular expressions!
Result is written to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">WELLS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;33_10.*&quot;</span><span class="p">,</span> <span class="s2">&quot;34_11-.*A.*&quot;</span><span class="p">],</span>
  <span class="s2">&quot;logrun&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
  <span class="s2">&quot;trajectory&quot;</span><span class="p">:</span> <span class="s2">&quot;Drilled trajectory&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;PERM&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Klogh&quot;</span><span class="p">}}</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Zonelog&quot;</span><span class="p">,</span> <span class="s2">&quot;Facies_log&quot;</span><span class="p">]</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="n">WELLS</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_well_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example when executed from files:</strong></p>
<p>Example extracting statistics for permeability for each zone and facies.
First extracting statistics for wells starting with “34_10-A”, then wells
starting with “34_10-B” in a subsequent run.
Result is written to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">WELLS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;34_10-A.*&quot;</span><span class="p">]</span>
<span class="n">PATH</span> <span class="o">=</span> <span class="s2">&quot;../input/qc/&quot;</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Phit&quot;</span><span class="p">,</span> <span class="s2">&quot;Klogh&quot;</span><span class="p">]</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Zonelog&quot;</span><span class="p">,</span> <span class="s2">&quot;Facies_log&quot;</span><span class="p">]</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="n">WELLS</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">PATH</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;A-wells&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_well_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">)</span>

    <span class="n">usedata2</span> <span class="o">=</span> <span class="n">usedata</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">usedata2</span><span class="p">[</span><span class="s2">&quot;wells&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;34_10-B.*&quot;</span><span class="p">]</span>
    <span class="n">usedata2</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;B-wells&quot;</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata2</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="get-bwell-statistics-examples">
<h4>get_bwell_statistics examples<a class="headerlink" href="#get-bwell-statistics-examples" title="Permalink to this heading"></a></h4>
<p><strong>Example in RMS:</strong></p>
<p>Example extracting statistics for permeability for each zone and facies.
All blocked wells will be included in statistics.
Result is written to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">WELLS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;bwname&quot;</span><span class="p">:</span> <span class="s2">&quot;BW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="s2">&quot;GeoGrid&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">PROPERTIES</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;PERM&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Klogh&quot;</span><span class="p">}}</span>
<span class="n">SELECTORS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Zonelog&quot;</span><span class="p">,</span> <span class="s2">&quot;Facies_log&quot;</span><span class="p">]</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">usedata</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="n">PROPERTIES</span><span class="p">,</span>
        <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="n">SELECTORS</span><span class="p">,</span>
        <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="n">WELLS</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_bwell_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">usedata</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example when executed from files:</strong></p>
<p>To come….</p>
</section>
</section>
</section>
<section id="comparison-of-data-from-different-sources">
<h2>Comparison of data from different sources<a class="headerlink" href="#comparison-of-data-from-different-sources" title="Permalink to this heading"></a></h2>
<section id="advice-when-comparing-data-from-different-sources">
<h3>Advice when comparing data from different sources<a class="headerlink" href="#advice-when-comparing-data-from-different-sources" title="Permalink to this heading"></a></h3>
<p>When extracting statistics from different sources there are several tips for enabling easy comparison
in the post-analysis of the data in e.g. WebViz:</p>
<ul class="simple">
<li><p>Input “properties” and “selectors” as dictionaries and keep property and selector keys identical
between the sources. The keys will be the names seen in the dataframe.</p></li>
<li><p>Try to use the same selectors for all sources</p></li>
<li><p>Keep the option “selector_combos” at True to get as much overlapping data as possible.
For example, if well statistics only have ZONE as selector and the grid properties are calculated with
selectors ZONE and REGION and “selector_combos” where True, the ZONE level statistics can be compared.</p></li>
<li><p>Use the “codes” field on the selectors to align and match the codenames for each selector. For example
if the zone codes are coarser in the grid than in the zonelogs from the wells, this field can be used
to merge codes in the zonelog together under one name.</p></li>
</ul>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h3>
<p>Example below collects statistical data from four different sources and writes result to a csv-file.
Several steps have been to ensure consistency between the sources, making the resulting csv-file easy to compare:</p>
<ul class="simple">
<li><p>“Poro” and “Perm” will be the property names</p></li>
<li><p>“ZONE” will be the column name for the selector</p></li>
<li><p>The zone codes “UpperReek”, “MidReek”, “LowerReek” is present in the two grids, to get the same codes in the wells
the codes are updated and redundant codes are excluded.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="n">GEOGRIDDATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Poro&quot;</span><span class="p">,</span> <span class="s2">&quot;Perm&quot;</span><span class="p">],</span>
    <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;ZONE&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Zone&quot;</span><span class="p">}},</span>
    <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="s2">&quot;GeoGrid&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">SIMGRIDDATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Poro&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;PORO&quot;</span><span class="p">},</span> <span class="s2">&quot;Perm&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;PERMX&quot;</span><span class="p">}},</span>
    <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;ZONE&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;Zone&quot;</span><span class="p">}},</span>
    <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="s2">&quot;SimGrid&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">BWDATA</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Poro&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Phit&quot;</span><span class="p">},</span> <span class="s2">&quot;Perm&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Klogh&quot;</span><span class="p">}},</span>
    <span class="s2">&quot;selectors&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;ZONE&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Zonelog&quot;</span><span class="p">,</span> <span class="s2">&quot;codes&quot;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s2">&quot;UpperReek&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s2">&quot;MidReek&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s2">&quot;LowerReek&quot;</span><span class="p">},</span> <span class="s2">&quot;exclude&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Above_TopUpperReek&quot;</span><span class="p">,</span> <span class="s2">&quot;Below_BaseLowerReek&quot;</span><span class="p">]}},</span>
    <span class="s2">&quot;wells&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bwname&quot;</span><span class="p">:</span> <span class="s2">&quot;BW&quot;</span><span class="p">,</span> <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="s2">&quot;Geogrid&quot;</span><span class="p">},</span>
<span class="p">}</span>

<span class="n">WDATA</span> <span class="o">=</span> <span class="n">BWDATA</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">WDATA</span><span class="p">[</span><span class="s2">&quot;wells&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;logrun&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="s2">&quot;trajectory&quot;</span><span class="p">:</span> <span class="s2">&quot;Drilled trajectory&quot;</span><span class="p">}</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>

    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">GEOGRIDDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">get_grid_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">SIMGRIDDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">get_bwell_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">BWDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">get_well_statistics</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">WDATA</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>

    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The section below for example of using the same configuration but with yaml-input.</p>
</div>
</section>
</section>
<section id="using-yaml-input-for-auto-execution">
<h2>Using yaml input for auto execution<a class="headerlink" href="#using-yaml-input-for-auto-execution" title="Permalink to this heading"></a></h2>
<p>A yaml-configuration file can be used with the method <code class="docutils literal notranslate"><span class="pre">from_yaml</span></code> to enable an automatic run of the methods.
This is especially useful if the user wants to run multiple extractions of statistics with minimal
code input.</p>
<p>The code evaluates what method to execute based on the value of the first level in the yaml file.
The second level is a list of input ‘data’ objects, and statistics will be calculated for each list
element.</p>
<p><strong>Three fields are available for the first level:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grid</span></code>: the get_grid_statistics method are executed on elements in this level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wells</span></code>: the get_well_statistics method are executed on elements in this level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blockedwells</span></code>: the get_bwell_statistics method are executed on elements in this level</p></li>
</ul>
<section id="example-in-rms-with-setting-from-a-yaml-file">
<h3>Example in RMS with setting from a YAML file:<a class="headerlink" href="#example-in-rms-with-setting-from-a-yaml-file" title="Permalink to this heading"></a></h3>
<p>Example using yaml input in RMS for extracting statistics for porosity and permeability from
four data sources (geogrid, simgrid, wells and blocked wells). The resulting combined
dataframe are written to csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fmu.tools</span> <span class="kn">import</span> <span class="n">QCProperties</span>

<span class="n">YAML_PATH</span> <span class="o">=</span> <span class="s2">&quot;../input/qc/somefile.yml&quot;</span>
<span class="n">REPORT</span> <span class="o">=</span> <span class="s2">&quot;../output/qc/somefile.csv&quot;</span>

<span class="k">def</span> <span class="nf">extract_statistics</span><span class="p">():</span>
    <span class="n">qcp</span> <span class="o">=</span> <span class="n">QCProperties</span><span class="p">()</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="n">YAML_PATH</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">)</span>
    <span class="n">qcp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">REPORT</span><span class="p">)</span>

<span class="k">if</span>  <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">extract_statistics</span><span class="p">()</span>
</pre></div>
</div>
<p>The YAML file may in case look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">grid</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeoGrid</span>
<span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Poro</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Perm</span>
<span class="w">    </span><span class="nt">selectors</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ZONE</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Zone</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SimGrid</span>
<span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Poro</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PORO</span>
<span class="w">      </span><span class="nt">Perm</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PERMX</span>
<span class="w">    </span><span class="nt">selectors</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ZONE</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Zone</span>

<span class="nt">wells</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">wells</span><span class="p">:</span>
<span class="w">      </span><span class="nt">logrun</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">log</span>
<span class="w">      </span><span class="nt">trajectory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Drilled trajectory</span>
<span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Poro</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Phit</span>
<span class="w">      </span><span class="nt">Perm</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Klogh</span>
<span class="w">    </span><span class="nt">selectors</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ZONE</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Zonelog</span>
<span class="w">        </span><span class="nt">codes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UpperReek</span>
<span class="w">          </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MidReek</span>
<span class="w">          </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LowerReek</span>
<span class="w">        </span><span class="nt">exclude</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Above_TopUpperReek</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Below_BaseLowerReek</span>

<span class="nt">blockedwells</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">wells</span><span class="p">:</span>
<span class="w">      </span><span class="nt">grid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeoGrid</span>
<span class="w">      </span><span class="nt">bwname</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BW</span>
<span class="w">    </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Poro</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Phit</span>
<span class="w">      </span><span class="nt">Perm</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Klogh</span>
<span class="w">    </span><span class="nt">selectors</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ZONE</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Zonelog</span>
<span class="w">        </span><span class="nt">codes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UpperReek</span>
<span class="w">          </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MidReek</span>
<span class="w">          </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LowerReek</span>
<span class="w">        </span><span class="nt">exclude</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Above_TopUpperReek</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Below_BaseLowerReek</span>
</pre></div>
</div>
</section>
</section>
<section id="additional-notes">
<h2>Additional Notes<a class="headerlink" href="#additional-notes" title="Permalink to this heading"></a></h2>
<section id="advice-on-performance">
<h3>Advice on performance<a class="headerlink" href="#advice-on-performance" title="Permalink to this heading"></a></h3>
<p>There are several settings that has an influence perfomance:</p>
<ul class="simple">
<li><p>Filters can be used to remove unnecessary data, this will limit the input data before statistics
is calculated and will speed up execution.</p></li>
<li><p>If many selectors, the option <code class="docutils literal notranslate"><span class="pre">selector_combos</span></code> can have a high impact on performance</p></li>
</ul>
</section>
<section id="comparison-with-statistics-in-rms">
<h3>Comparison with statistics in RMS<a class="headerlink" href="#comparison-with-statistics-in-rms" title="Permalink to this heading"></a></h3>
<ul>
<li><p>To avoid bias in the calculation, the code removes duplicates from both well and blocked well
data before calculating statistics. Duplicates are data points that have the same coordinates
and property values. For blocked wells this refers to cells that are penetrated by multiple wells,
for raw wells this can happen if branches of multilateral wells have overlapping logs.</p>
<p>This is the same as RMS does when calculating statistics for blocked wells, and statistical values
extracted with this code will be identical to RMS. However RMS does not remove duplicates when
calculating statistics for raw wells, and minor differences in statistical values are possible.</p>
</li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="qcforward.html" class="btn btn-neutral float-left" title="The qcforward functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="qcreset.html" class="btn btn-neutral float-right" title="The qcreset module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Equinor.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #ff1243;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #474747;
    }
    .wy-side-nav-search > div.version {
      color: white;
    }
  </style>


</body>
</html>